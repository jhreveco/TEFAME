<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of CombinacionCargas</title>
  <meta name="keywords" content="CombinacionCargas">
  <meta name="description" content="______________________________________________________________________">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- # tefame --><!-- # modelo --><!-- menu.html cargas -->
<h1>CombinacionCargas
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>______________________________________________________________________</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>This is a script file. </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> ______________________________________________________________________
|                                                                      |
|           TEFAME - Toolbox para Elemento Finitos y Analisis          |
|                  Matricial de Estructuras en MATLAB                  |
|                                                                      |
|                   Area  de Estructuras y Geotecnia                   |
|                   Departamento de Ingenieria Civil                   |
|              Facultad de Ciencias Fisicas y Matematicas              |
|                         Universidad de Chile                         |
|                                                                      |
| TEFAME es una  plataforma en base a objetos para modelar, analizar y |
| visualizar  la respuesta de sistemas  estructurales usando el metodo |
| de elementos finitos y analisis matricial de estructuras en MATLAB.  |
| La plataforma es desarrollada en  propagacion orientada a objetos en |
| MATLAB.                                                              |
|______________________________________________________________________|
 ______________________________________________________________________
|                                                                      |
| Clase CombinacionCargas                                              |
|                                                                      |
| Este archivo contiene la definicion de la Clase CombinacionCargas    |
| CombinacionCargas es una subclase  de la clase ComponenteModelo y    |
| corresponde a la representacion de una combinacion de cargas en el   |
| metodo de elementos  finitos o analisis matricial de estructuras.    |
|                                                                      |
| Programado: Pablo Pizarro @ppizarror                                 |
| Fecha: 08/05/2019                                                    |
|______________________________________________________________________|

  Properties (Access=private):
       cargas
  Methods:
       combinacionCargaObj = CombinacionCargas(etiquetaCombinacion,cargas)
       t = obtenerVectorTiempo(combinacionCargaObj)
       t = tAnalisis(combinacionCargaObj)
       t = dt(combinacionCargaObj)
       p = obtenerCarga(combinacionCargaObj)
       u = obtenerDesplazamiento(combinacionCargaObj)
       u = obtenerDesplazamientoTiempo(combinacionCargaObj,gdl,tiempo)
       v = obtenerVelocidad(combinacionCargaObj)
       a = obtenerAceleracion(combinacionCargaObj)
       disp(combinacionCargaObj)
  Methods SuperClass (ComponenteModelo):
       etiqueta = obtenerEtiqueta(componenteModeloObj)
       e = equals(componenteModeloObj,obj)
       objID = obtenerIDObjeto(componenteModeloObj)</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../tefame/modelo/base/ComponenteModelo.html" class="code" title="">ComponenteModelo</a>	______________________________________________________________________</li><li><a href="CombinacionCargas.html" class="code" title="">CombinacionCargas</a>	______________________________________________________________________</li><li><a href="../../../tefame/utils/dispMetodoTEFAME.html" class="code" title="function dispMetodoTEFAME()">dispMetodoTEFAME</a>	dispMetodoTEFAME: Normaliza la salida estandar disp en consola de los</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="CombinacionCargas.html" class="code" title="">CombinacionCargas</a>	______________________________________________________________________</li></ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function combinacionCargaObj = CombinacionCargas(etiquetaCombinacion, cargas)</a></li><li><a href="#_sub2" class="code">function t = obtenerVectorTiempo(combinacionCargaObj)</a></li><li><a href="#_sub3" class="code">function p = obtenerCarga(combinacionCargaObj)</a></li><li><a href="#_sub4" class="code">function u = obtenerDesplazamiento(combinacionCargaObj)</a></li><li><a href="#_sub5" class="code">function u = obtenerDesplazamientoTiempo(combinacionCargaObj, gdl, tiempo)</a></li><li><a href="#_sub6" class="code">function v = obtenerVelocidad(combinacionCargaObj)</a></li><li><a href="#_sub7" class="code">function a = obtenerAceleracion(combinacionCargaObj)</a></li><li><a href="#_sub8" class="code">function r = usoAmortiguamientoRayleigh(combinacionCargaObj)</a></li><li><a href="#_sub9" class="code">function m = usoDescomposicionModal(combinacionCargaObj)</a></li><li><a href="#_sub10" class="code">function d = usoDeDisipadores(combinacionCargaObj)</a></li><li><a href="#_sub11" class="code">function t = tAnalisis(combinacionCargaObj)</a></li><li><a href="#_sub12" class="code">function t = dt(combinacionCargaObj)</a></li><li><a href="#_sub13" class="code">function disp(combinacionCargaObj)</a></li><li><a href="#_sub14" class="code">function [dt, t] = obtenerDtMinimo(combinacionCargaObj)</a></li><li><a href="#_sub15" class="code">function a = reshapeMatrix(combinacionCargaObj, m, tini, dtm, tanalisis, dt, t, cargaEtiqueta)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">% ______________________________________________________________________</span>
0002 <span class="comment">%|                                                                      |</span>
0003 <span class="comment">%|           TEFAME - Toolbox para Elemento Finitos y Analisis          |</span>
0004 <span class="comment">%|                  Matricial de Estructuras en MATLAB                  |</span>
0005 <span class="comment">%|                                                                      |</span>
0006 <span class="comment">%|                   Area  de Estructuras y Geotecnia                   |</span>
0007 <span class="comment">%|                   Departamento de Ingenieria Civil                   |</span>
0008 <span class="comment">%|              Facultad de Ciencias Fisicas y Matematicas              |</span>
0009 <span class="comment">%|                         Universidad de Chile                         |</span>
0010 <span class="comment">%|                                                                      |</span>
0011 <span class="comment">%| TEFAME es una  plataforma en base a objetos para modelar, analizar y |</span>
0012 <span class="comment">%| visualizar  la respuesta de sistemas  estructurales usando el metodo |</span>
0013 <span class="comment">%| de elementos finitos y analisis matricial de estructuras en MATLAB.  |</span>
0014 <span class="comment">%| La plataforma es desarrollada en  propagacion orientada a objetos en |</span>
0015 <span class="comment">%| MATLAB.                                                              |</span>
0016 <span class="comment">%|______________________________________________________________________|</span>
0017 <span class="comment">% ______________________________________________________________________</span>
0018 <span class="comment">%|                                                                      |</span>
0019 <span class="comment">%| Clase CombinacionCargas                                              |</span>
0020 <span class="comment">%|                                                                      |</span>
0021 <span class="comment">%| Este archivo contiene la definicion de la Clase CombinacionCargas    |</span>
0022 <span class="comment">%| CombinacionCargas es una subclase  de la clase ComponenteModelo y    |</span>
0023 <span class="comment">%| corresponde a la representacion de una combinacion de cargas en el   |</span>
0024 <span class="comment">%| metodo de elementos  finitos o analisis matricial de estructuras.    |</span>
0025 <span class="comment">%|                                                                      |</span>
0026 <span class="comment">%| Programado: Pablo Pizarro @ppizarror                                 |</span>
0027 <span class="comment">%| Fecha: 08/05/2019                                                    |</span>
0028 <span class="comment">%|______________________________________________________________________|</span>
0029 <span class="comment">%</span>
0030 <span class="comment">%  Properties (Access=private):</span>
0031 <span class="comment">%       cargas</span>
0032 <span class="comment">%  Methods:</span>
0033 <span class="comment">%       combinacionCargaObj = CombinacionCargas(etiquetaCombinacion,cargas)</span>
0034 <span class="comment">%       t = obtenerVectorTiempo(combinacionCargaObj)</span>
0035 <span class="comment">%       t = tAnalisis(combinacionCargaObj)</span>
0036 <span class="comment">%       t = dt(combinacionCargaObj)</span>
0037 <span class="comment">%       p = obtenerCarga(combinacionCargaObj)</span>
0038 <span class="comment">%       u = obtenerDesplazamiento(combinacionCargaObj)</span>
0039 <span class="comment">%       u = obtenerDesplazamientoTiempo(combinacionCargaObj,gdl,tiempo)</span>
0040 <span class="comment">%       v = obtenerVelocidad(combinacionCargaObj)</span>
0041 <span class="comment">%       a = obtenerAceleracion(combinacionCargaObj)</span>
0042 <span class="comment">%       disp(combinacionCargaObj)</span>
0043 <span class="comment">%  Methods SuperClass (ComponenteModelo):</span>
0044 <span class="comment">%       etiqueta = obtenerEtiqueta(componenteModeloObj)</span>
0045 <span class="comment">%       e = equals(componenteModeloObj,obj)</span>
0046 <span class="comment">%       objID = obtenerIDObjeto(componenteModeloObj)</span>
0047 
0048 classdef <a href="CombinacionCargas.html" class="code" title="">CombinacionCargas</a> &lt; <a href="../../../tefame/modelo/base/ComponenteModelo.html" class="code" title="">ComponenteModelo</a>
0049     
0050     properties(Access = private)
0051         cargas <span class="comment">% Arreglo de cargas</span>
0052         uGuardado <span class="comment">% Guarda el arreglo</span>
0053     <span class="keyword">end</span> <span class="comment">% properties CombinacionCargas</span>
0054     
0055     methods(Access = public)
0056         
0057         <a name="_sub0" href="#_subfunctions" class="code">function combinacionCargaObj = CombinacionCargas(etiquetaCombinacion, cargas)</a>
0058             <span class="comment">% CombinacionCargas: Es el constructor de la clase, requiere el</span>
0059             <span class="comment">% nombre de la combinacion y un cell de cargas</span>
0060             <span class="comment">%</span>
0061             <span class="comment">% combinacionCargaObj = CombinacionCargas(etiquetaCombinacion,cargas)</span>
0062             
0063             <span class="keyword">if</span> nargin == 0
0064                 etiquetaCombinacion = <span class="string">''</span>;
0065             <span class="keyword">end</span> <span class="comment">% if</span>
0066             
0067             <span class="comment">% Llamamos al constructor de la SuperClass que es la clase ComponenteModelo</span>
0068             combinacionCargaObj = combinacionCargaObj@<a href="../../../tefame/modelo/base/ComponenteModelo.html" class="code" title="">ComponenteModelo</a>(etiquetaCombinacion);
0069             
0070             <span class="comment">% Chequea que todas las cargas sean dinamicas</span>
0071             <span class="keyword">for</span> i = 1:length(cargas)
0072                 <span class="keyword">if</span> ~isa(cargas{i}, <span class="string">'CargaDinamica'</span>)
0073                     error(<span class="string">'Carga %s debe ser dinamica'</span>, cargas{i}.obtenerEtiqueta());
0074                 <span class="keyword">end</span>
0075                 <span class="keyword">if</span> ~cargas{i}.cargaActivada()
0076                     error(<span class="string">'Carga %s esta desactivada'</span>, cargas{i}.obtenerEtiqueta());
0077                 <span class="keyword">end</span>
0078             <span class="keyword">end</span> <span class="comment">% for i</span>
0079             
0080             <span class="comment">% Guarda datos</span>
0081             combinacionCargaObj.cargas = cargas;
0082             combinacionCargaObj.uGuardado = [];
0083             
0084         <span class="keyword">end</span> <span class="comment">% CombinacionCargas constructor</span>
0085         
0086         <a name="_sub1" href="#_subfunctions" class="code">function t = obtenerVectorTiempo(combinacionCargaObj)</a>
0087             <span class="comment">% obtenerVectorTiempo: Retorna el vector de tiempo</span>
0088             <span class="comment">%</span>
0089             <span class="comment">% t = obtenerVectorTiempo(combinacionCargaObj)</span>
0090             
0091             [~, t] = <a href="#_sub14" class="code" title="subfunction [dt, t] = obtenerDtMinimo(combinacionCargaObj)">obtenerDtMinimo</a>(combinacionCargaObj);
0092             
0093         <span class="keyword">end</span> <span class="comment">% obtenerVectorTiempo function</span>
0094         
0095         <a name="_sub2" href="#_subfunctions" class="code">function p = obtenerCarga(combinacionCargaObj)</a>
0096             <span class="comment">% obtenerCarga: Obtiene la carga de la combinacion de cargas</span>
0097             <span class="comment">%</span>
0098             <span class="comment">% obtenerCarga(combinacionCargaObj)</span>
0099             
0100             <span class="comment">% Genera el arreglo de tiempo de interpolacion</span>
0101             [<a href="#_sub12" class="code" title="subfunction t = dt(combinacionCargaObj)">dt</a>, t] = <a href="#_sub14" class="code" title="subfunction [dt, t] = obtenerDtMinimo(combinacionCargaObj)">obtenerDtMinimo</a>(combinacionCargaObj);
0102             [ngdlf, ~] = size(combinacionCargaObj.cargas{1}.obtenerCarga());
0103             
0104             <span class="comment">% Genera el vector final</span>
0105             p = zeros(ngdlf, length(t));
0106             
0107             <span class="comment">% Interpola cada carga</span>
0108             <span class="keyword">for</span> i = 1:length(combinacionCargaObj.cargas)
0109                 
0110                 [ndg, ~] = size(combinacionCargaObj.cargas{i}.obtenerCarga());
0111                 <span class="keyword">if</span> ndg ~= ngdlf
0112                     error(<span class="string">'Grado de libertad de la carga no corresponde con la combinacion de cargas'</span>);
0113                 <span class="keyword">end</span>
0114                 
0115                 x = combinacionCargaObj.reshapeMatrix(combinacionCargaObj.cargas{i}.obtenerCarga(), <span class="keyword">...</span>
0116                     combinacionCargaObj.cargas{i}.tInicio, combinacionCargaObj.cargas{i}.dt, <span class="keyword">...</span>
0117                     combinacionCargaObj.cargas{i}.tAnalisis, <a href="#_sub12" class="code" title="subfunction t = dt(combinacionCargaObj)">dt</a>, t, <span class="keyword">...</span>
0118                     combinacionCargaObj.cargas{i}.obtenerEtiqueta());
0119                 [~, lx] = size(x);
0120                 
0121                 <span class="comment">% Suma el vector</span>
0122                 j = 1;
0123                 <span class="keyword">for</span> k = 1:length(t)
0124                     <span class="keyword">if</span> t(k) &gt;= combinacionCargaObj.cargas{i}.tInicio
0125                         p(:, k) = p(:, k) + x(:, j);
0126                         j = j + 1;
0127                     <span class="keyword">end</span>
0128                     <span class="keyword">if</span> j &gt; lx
0129                         <span class="keyword">break</span>;
0130                     <span class="keyword">end</span>
0131                 <span class="keyword">end</span> <span class="comment">% for k</span>
0132                 
0133             <span class="keyword">end</span>
0134             
0135         <span class="keyword">end</span> <span class="comment">% obtenerCarga function</span>
0136         
0137         <a name="_sub3" href="#_subfunctions" class="code">function u = obtenerDesplazamiento(combinacionCargaObj)</a>
0138             <span class="comment">% obtenerDesplazamiento: Obtiene el desplazamiento de la</span>
0139             <span class="comment">% combinacion de cargas</span>
0140             <span class="comment">%</span>
0141             <span class="comment">% obtenerDesplazamiento(combinacionCargaObj)</span>
0142             
0143             <span class="comment">% Genera el arreglo de tiempo de interpolacion</span>
0144             [<a href="#_sub12" class="code" title="subfunction t = dt(combinacionCargaObj)">dt</a>, t] = <a href="#_sub14" class="code" title="subfunction [dt, t] = obtenerDtMinimo(combinacionCargaObj)">obtenerDtMinimo</a>(combinacionCargaObj);
0145             [ngdlf, ~] = size(combinacionCargaObj.cargas{1}.obtenerDesplazamiento());
0146             
0147             <span class="comment">% Genera el vector final</span>
0148             u = zeros(ngdlf, length(t));
0149             
0150             <span class="comment">% Interpola cada desplazamiento</span>
0151             <span class="keyword">for</span> i = 1:length(combinacionCargaObj.cargas)
0152                 
0153                 [ndg, ~] = size(combinacionCargaObj.cargas{i}.obtenerDesplazamiento());
0154                 <span class="keyword">if</span> ndg ~= ngdlf
0155                     error(<span class="string">'Grado de libertad de la carga no corresponde con la combinacion de cargas'</span>);
0156                 <span class="keyword">end</span>
0157                 
0158                 x = combinacionCargaObj.reshapeMatrix(combinacionCargaObj.cargas{i}.obtenerDesplazamiento(), <span class="keyword">...</span>
0159                     combinacionCargaObj.cargas{i}.tInicio, combinacionCargaObj.cargas{i}.dt, <span class="keyword">...</span>
0160                     combinacionCargaObj.cargas{i}.tAnalisis, <a href="#_sub12" class="code" title="subfunction t = dt(combinacionCargaObj)">dt</a>, t, <span class="keyword">...</span>
0161                     combinacionCargaObj.cargas{i}.obtenerEtiqueta());
0162                 [~, lx] = size(x);
0163                 
0164                 <span class="comment">% Suma el vector</span>
0165                 j = 1;
0166                 <span class="keyword">for</span> k = 1:length(t)
0167                     <span class="keyword">if</span> t(k) &gt;= combinacionCargaObj.cargas{i}.tInicio
0168                         u(:, k) = u(:, k) + x(:, j);
0169                         j = j + 1;
0170                     <span class="keyword">end</span>
0171                     <span class="keyword">if</span> j &gt; lx
0172                         <span class="keyword">break</span>;
0173                     <span class="keyword">end</span>
0174                 <span class="keyword">end</span> <span class="comment">% for k</span>
0175                 
0176             <span class="keyword">end</span>
0177             
0178         <span class="keyword">end</span> <span class="comment">% obtenerDesplazamiento function</span>
0179         
0180         <a name="_sub4" href="#_subfunctions" class="code">function u = obtenerDesplazamientoTiempo(combinacionCargaObj, gdl, tiempo)</a>
0181             <span class="comment">% obtenerDesplazamientoTiempo obtiene el desplazamiento de un</span>
0182             <span class="comment">% grado de libertad en un determinado tiempo</span>
0183             <span class="comment">%</span>
0184             <span class="comment">% u = obtenerDesplazamientoTiempo(combinacionCargaObj,gdl,tiempo)</span>
0185             
0186             <span class="keyword">if</span> isempty(combinacionCargaObj.uGuardado)
0187                 combinacionCargaObj.uGuardado = combinacionCargaObj.obtenerDesplazamiento();
0188             <span class="keyword">end</span>
0189             
0190             <span class="keyword">if</span> tiempo &lt; 0 <span class="comment">% Retorna el maximo</span>
0191                 u = max(combinacionCargaObj.uGuardado(gdl, :));
0192             <span class="keyword">else</span>
0193                 u = combinacionCargaObj.uGuardado(gdl, tiempo);
0194             <span class="keyword">end</span>
0195             
0196         <span class="keyword">end</span> <span class="comment">% obtenerDesplazamientoTiempo function</span>
0197         
0198         <a name="_sub5" href="#_subfunctions" class="code">function v = obtenerVelocidad(combinacionCargaObj)</a>
0199             <span class="comment">% obtenerVelocidad: Obtiene la velocidad de la combinacion de</span>
0200             <span class="comment">% cargas</span>
0201             <span class="comment">%</span>
0202             <span class="comment">% obtenerVelocidad(combinacionCargaObj)</span>
0203             
0204             <span class="comment">% Genera el arreglo de tiempo de interpolacion</span>
0205             [<a href="#_sub12" class="code" title="subfunction t = dt(combinacionCargaObj)">dt</a>, t] = <a href="#_sub14" class="code" title="subfunction [dt, t] = obtenerDtMinimo(combinacionCargaObj)">obtenerDtMinimo</a>(combinacionCargaObj);
0206             [ngdlf, ~] = size(combinacionCargaObj.cargas{1}.obtenerDesplazamiento());
0207             
0208             <span class="comment">% Genera el vector final</span>
0209             v = zeros(ngdlf, length(t));
0210             
0211             <span class="comment">% Interpola cada desplazamiento</span>
0212             <span class="keyword">for</span> i = 1:length(combinacionCargaObj.cargas)
0213                 
0214                 [ndg, ~] = size(combinacionCargaObj.cargas{i}.obtenerVelocidad());
0215                 <span class="keyword">if</span> ndg ~= ngdlf
0216                     error(<span class="string">'Grado de libertad de la carga no corresponde con la combinacion de cargas'</span>);
0217                 <span class="keyword">end</span>
0218                 
0219                 x = combinacionCargaObj.reshapeMatrix(combinacionCargaObj.cargas{i}.obtenerVelocidad(), <span class="keyword">...</span>
0220                     combinacionCargaObj.cargas{i}.tInicio, combinacionCargaObj.cargas{i}.dt, <span class="keyword">...</span>
0221                     combinacionCargaObj.cargas{i}.tAnalisis, <a href="#_sub12" class="code" title="subfunction t = dt(combinacionCargaObj)">dt</a>, t, <span class="keyword">...</span>
0222                     combinacionCargaObj.cargas{i}.obtenerEtiqueta());
0223                 [~, lx] = size(x);
0224                 
0225                 <span class="comment">% Suma el vector</span>
0226                 j = 1;
0227                 <span class="keyword">for</span> k = 1:length(t)
0228                     <span class="keyword">if</span> t(k) &gt;= combinacionCargaObj.cargas{i}.tInicio
0229                         v(:, k) = v(:, k) + x(:, j);
0230                         j = j + 1;
0231                     <span class="keyword">end</span>
0232                     <span class="keyword">if</span> j &gt; lx
0233                         <span class="keyword">break</span>;
0234                     <span class="keyword">end</span>
0235                 <span class="keyword">end</span> <span class="comment">% for k</span>
0236                 
0237             <span class="keyword">end</span>
0238             
0239         <span class="keyword">end</span> <span class="comment">% obtenerVelocidad function</span>
0240         
0241         <a name="_sub6" href="#_subfunctions" class="code">function a = obtenerAceleracion(combinacionCargaObj)</a>
0242             <span class="comment">% obtenerAceleracion: Obtiene la aceleracion de la combinacion</span>
0243             <span class="comment">% de cargas</span>
0244             <span class="comment">%</span>
0245             <span class="comment">% obtenerAceleracion(combinacionCargaObj)</span>
0246             
0247             <span class="comment">% Genera el arreglo de tiempo de interpolacion</span>
0248             [<a href="#_sub12" class="code" title="subfunction t = dt(combinacionCargaObj)">dt</a>, t] = <a href="#_sub14" class="code" title="subfunction [dt, t] = obtenerDtMinimo(combinacionCargaObj)">obtenerDtMinimo</a>(combinacionCargaObj);
0249             [ngdlf, ~] = size(combinacionCargaObj.cargas{1}.obtenerDesplazamiento());
0250             
0251             <span class="comment">% Genera el vector final</span>
0252             a = zeros(ngdlf, length(t));
0253             
0254             <span class="comment">% Interpola cada desplazamiento</span>
0255             <span class="keyword">for</span> i = 1:length(combinacionCargaObj.cargas)
0256                 
0257                 [ndg, ~] = size(combinacionCargaObj.cargas{i}.obtenerAceleracion());
0258                 <span class="keyword">if</span> ndg ~= ngdlf
0259                     error(<span class="string">'Grado de libertad de la carga no corresponde con la combinacion de cargas'</span>);
0260                 <span class="keyword">end</span>
0261                 
0262                 x = combinacionCargaObj.reshapeMatrix(combinacionCargaObj.cargas{i}.obtenerAceleracion(), <span class="keyword">...</span>
0263                     combinacionCargaObj.cargas{i}.tInicio, combinacionCargaObj.cargas{i}.dt, <span class="keyword">...</span>
0264                     combinacionCargaObj.cargas{i}.tAnalisis, <a href="#_sub12" class="code" title="subfunction t = dt(combinacionCargaObj)">dt</a>, t, <span class="keyword">...</span>
0265                     combinacionCargaObj.cargas{i}.obtenerEtiqueta());
0266                 [~, lx] = size(x);
0267                 
0268                 <span class="comment">% Suma el vector</span>
0269                 j = 1;
0270                 <span class="keyword">for</span> k = 1:length(t)
0271                     <span class="keyword">if</span> t(k) &gt;= combinacionCargaObj.cargas{i}.tInicio
0272                         a(:, k) = a(:, k) + x(:, j);
0273                         j = j + 1;
0274                     <span class="keyword">end</span>
0275                     <span class="keyword">if</span> j &gt; lx
0276                         <span class="keyword">break</span>;
0277                     <span class="keyword">end</span>
0278                 <span class="keyword">end</span> <span class="comment">% for k</span>
0279                 
0280             <span class="keyword">end</span>
0281             
0282         <span class="keyword">end</span> <span class="comment">% obtenerAceleracion function</span>
0283         
0284         <a name="_sub7" href="#_subfunctions" class="code">function r = usoAmortiguamientoRayleigh(combinacionCargaObj)</a>
0285             <span class="comment">% usoAmortiguamientoRayleigh: Indica que las cargas se</span>
0286             <span class="comment">% calcularon con rayleigh</span>
0287             <span class="comment">%</span>
0288             <span class="comment">% t = usoAmortiguamientoRayleigh(combinacionCargaObj)</span>
0289             
0290             r = false;
0291             <span class="keyword">for</span> i = 1:length(combinacionCargaObj.cargas)
0292                 r = r || combinacionCargaObj.cargas{i}.usoAmortiguamientoRayleigh();
0293             <span class="keyword">end</span> <span class="comment">% for i</span>
0294             
0295         <span class="keyword">end</span> <span class="comment">% usoAmortiguamientoRayleigh function</span>
0296         
0297         <a name="_sub8" href="#_subfunctions" class="code">function m = usoDescomposicionModal(combinacionCargaObj)</a>
0298             <span class="comment">% usoDescomposicionModal: Indica que las cargas se</span>
0299             <span class="comment">% calcularon con descomposicion modal</span>
0300             <span class="comment">%</span>
0301             <span class="comment">% m = usoDescomposicionModal(combinacionCargaObj)</span>
0302             
0303             m = false;
0304             <span class="keyword">for</span> i = 1:length(combinacionCargaObj.cargas)
0305                 m = m || combinacionCargaObj.cargas{i}.usoDescomposicionModal();
0306             <span class="keyword">end</span> <span class="comment">% for i</span>
0307             
0308         <span class="keyword">end</span> <span class="comment">% usoDescomposicionModal function</span>
0309         
0310         <a name="_sub9" href="#_subfunctions" class="code">function d = usoDeDisipadores(combinacionCargaObj)</a>
0311             <span class="comment">% usoDescomposicionModal: Indica que las cargas se</span>
0312             <span class="comment">% calcularon con disipadores</span>
0313             <span class="comment">%</span>
0314             <span class="comment">% m = usoDeDisipadores(combinacionCargaObj)</span>
0315             
0316             d = false;
0317             <span class="keyword">for</span> i = 1:length(combinacionCargaObj.cargas)
0318                 d = d || combinacionCargaObj.cargas{i}.usoDeDisipadores();
0319             <span class="keyword">end</span> <span class="comment">% for i</span>
0320             
0321         <span class="keyword">end</span> <span class="comment">% usoDeDisipadores function</span>
0322         
0323         <a name="_sub10" href="#_subfunctions" class="code">function t = tAnalisis(combinacionCargaObj)</a>
0324             <span class="comment">% tAnalisis: Retorna el tiempo de analisis de la combinacion de</span>
0325             <span class="comment">% cargas</span>
0326             <span class="comment">%</span>
0327             <span class="comment">% t = tAnalisis(combinacionCargaObj)</span>
0328             
0329             [~, t] = <a href="#_sub14" class="code" title="subfunction [dt, t] = obtenerDtMinimo(combinacionCargaObj)">obtenerDtMinimo</a>(combinacionCargaObj);
0330             t = max(t) - min(t);
0331             
0332         <span class="keyword">end</span> <span class="comment">% tAnalisis function</span>
0333         
0334         <a name="_sub11" href="#_subfunctions" class="code">function t = dt(combinacionCargaObj)</a>
0335             <span class="comment">% dt: Obtiene el dt de la combinacion de cargas</span>
0336             <span class="comment">%</span>
0337             <span class="comment">% t = dt(combinacionCargaObj)</span>
0338             
0339             [t, ~] = <a href="#_sub14" class="code" title="subfunction [dt, t] = obtenerDtMinimo(combinacionCargaObj)">obtenerDtMinimo</a>(combinacionCargaObj);
0340             
0341         <span class="keyword">end</span> <span class="comment">% dt function</span>
0342         
0343         <a name="_sub12" href="#_subfunctions" class="code">function disp(combinacionCargaObj)</a>
0344             <span class="comment">% disp: es un metodo de la clase CombinacionCarga que se usa</span>
0345             <span class="comment">% para imprimir en command Window la informacion de la</span>
0346             <span class="comment">% combinacion de cargas</span>
0347             <span class="comment">%</span>
0348             <span class="comment">% disp(combinacionCargaObj)</span>
0349             
0350             fprintf(<span class="string">'Propiedades combinacion cargas:\n'</span>);
0351             <a href="#_sub13" class="code" title="subfunction disp(combinacionCargaObj)">disp</a>@<a href="../../../tefame/modelo/base/ComponenteModelo.html" class="code" title="">ComponenteModelo</a>(combinacionCargaObj);
0352             
0353             fprintf(<span class="string">'Cargas del modelo:'</span>);
0354             <span class="keyword">for</span> i = 1:length(combinacionCargaObj.cargas)
0355                 fprintf(<span class="string">'\t%s'</span>, combinacionCargaObj.cargas.obtenerEtiqueta());
0356             <span class="keyword">end</span> <span class="comment">% for i</span>
0357             
0358             <a href="../../../tefame/utils/dispMetodoTEFAME.html" class="code" title="function dispMetodoTEFAME()">dispMetodoTEFAME</a>();
0359             
0360         <span class="keyword">end</span> <span class="comment">% disp function</span>
0361         
0362     <span class="keyword">end</span> <span class="comment">% methods CombinacionCargas public</span>
0363     
0364     methods(Access = private)
0365         
0366         <a name="_sub13" href="#_subfunctions" class="code">function [dt, t] = obtenerDtMinimo(combinacionCargaObj)</a>
0367             <span class="comment">% combinacionCargaObj: Obtiene el arreglo de tiempo comun a</span>
0368             <span class="comment">% todas las cargas de la combinacion</span>
0369             <span class="comment">%</span>
0370             <span class="comment">% [dt, t] = obtenerDtMinimo(combinacionCargaObj)</span>
0371             
0372             <a href="#_sub12" class="code" title="subfunction t = dt(combinacionCargaObj)">dt</a> = Inf;
0373             tFin = 0;
0374             tInicio = Inf;
0375             <span class="keyword">for</span> i = 1:length(combinacionCargaObj.cargas)
0376                 
0377                 <a href="#_sub12" class="code" title="subfunction t = dt(combinacionCargaObj)">dt</a> = min(<a href="#_sub12" class="code" title="subfunction t = dt(combinacionCargaObj)">dt</a>, combinacionCargaObj.cargas{i}.dt);
0378                 tFin = max(tFin, combinacionCargaObj.cargas{i}.tAnalisis+combinacionCargaObj.cargas{i}.tInicio);
0379                 tInicio = min(tInicio, combinacionCargaObj.cargas{i}.tInicio);
0380                 
0381             <span class="keyword">end</span> <span class="comment">% for i</span>
0382             
0383             t = floor(tInicio):<a href="#_sub12" class="code" title="subfunction t = dt(combinacionCargaObj)">dt</a>:ceil(tFin);
0384             <span class="comment">% t = t(:, 1:end-1); % Elimina la ultima columna</span>
0385             
0386         <span class="keyword">end</span> <span class="comment">% obtenerDtMinimo function</span>
0387         
0388         <a name="_sub14" href="#_subfunctions" class="code">function a = reshapeMatrix(combinacionCargaObj, m, tini, dtm, tanalisis, dt, t, cargaEtiqueta) </a><span class="comment">%#ok&lt;INUSL&gt;</span>
0389             <span class="comment">% reshapeMatrix: reshapeMatrix reajusta una matriz dado un tiempo</span>
0390             <span class="comment">%</span>
0391             <span class="comment">% a = reshapeMatrix(combinacionCargaObj,m,tini,dtm,tanalisis,dt,t,cargaEtiqueta)</span>
0392             
0393             <span class="comment">% Si la carga no es calculada retorna error</span>
0394             <span class="keyword">if</span> isempty(m)
0395                 error(<span class="string">'Carga %s no ha sido calculada'</span>, cargaEtiqueta);
0396             <span class="keyword">end</span>
0397             
0398             <span class="comment">% Si m es una columna la extiende</span>
0399             [r, c] = size(m);
0400             <span class="keyword">if</span> c == 1
0401                 k = length(t);
0402                 mn = zeros(r, k);
0403                 <span class="keyword">for</span> j = 1:k
0404                     mn(:, j) = m(:);
0405                 <span class="keyword">end</span> <span class="comment">% for j</span>
0406                 a = mn;
0407                 <span class="keyword">return</span>;
0408             <span class="keyword">end</span>
0409             [r, c] = size(m);
0410             
0411             <span class="comment">% Si es la misma matriz retorna</span>
0412             <span class="keyword">if</span> dtm == <a href="#_sub12" class="code" title="subfunction t = dt(combinacionCargaObj)">dt</a>
0413                 a = m;
0414                 <span class="keyword">return</span>;
0415             <span class="keyword">end</span>
0416             
0417             <span class="comment">% Tiempo de m</span>
0418             tm = linspace(tini, tini+tanalisis, c);
0419             
0420             <span class="comment">% Nuevo tiempo</span>
0421             tf = linspace(tini, tini+tanalisis, tanalisis/<a href="#_sub12" class="code" title="subfunction t = dt(combinacionCargaObj)">dt</a>);
0422             
0423             <span class="comment">% Crea nueva matriz</span>
0424             a = zeros(r, length(tf));
0425             
0426             <span class="keyword">for</span> k1 = 1:size(m, 1)
0427                 a(k1, :) = interp1(tm, m(k1, :), tf, <span class="string">'linear'</span>);
0428             <span class="keyword">end</span> <span class="comment">% for k1</span>
0429             
0430         <span class="keyword">end</span> <span class="comment">% reshapeMatrix function</span>
0431         
0432     <span class="keyword">end</span> <span class="comment">% methods CombinacionCargas private</span>
0433     
0434 <span class="keyword">end</span> <span class="comment">% class CombinacionCargas</span></pre></div>
<hr><address>Generated on Sun 12-May-2019 12:27:52 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>